<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.used.example.mapper.UserMapper">
	<insert id= "createUser" parameterType= "com.used.example.domain.User">
		insert into user(
			u_username,
			u_password,
			u_phone,
			u_email,
			u_address,
			u_isAccountNonLocked,
			u_isAccountNonExpired,
			u_isCredentialsNonExpired,
			u_isEnabled
		) values(
			#{username},
			#{password},
			#{phone},
			#{email},
			#{address},
			#{isAccountNonLocked},
			#{isAccountNonExpired},
			#{isCredentialsNonExpired},
			#{isEnabled}

		)
	</insert>
	<insert id= "createAuthority"  parameterType= "com.used.example.domain.User">
		insert into auth(
			u_email,
			u_auth
		
		) values
				<foreach item="authority" index="index" collection="authorities" separator=",">
						(#{email}, #{authority.role})
				</foreach>
				
				ON DUPLICATE KEY
							UPDATE
								u_email = #email}
	</insert>



</mapper>
